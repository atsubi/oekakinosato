<!-- ページを読み込んだら一定時間ごとにcgiプログラムが実行する                  
     現在のページアクセス数をサーバ側に伝え、結果を表示するサンプル  -->
<html>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
  <head>
    <title>お絵かきの里</title>
  </head>
  <script>

    function shift() {
      var req = getXHR();
      var result = document.getElementById("result");

      <!-- 通信処理 -->
      req.onreadystatechange = function() {

        if( req.readyState == 4 ) {
           if ( req.status == 200 ) {
               result.innerHTML = req.responseText;
           } else {
               result.innerHTML = req.status;
           }
        }
      }

      // ページ移動　遷移
      req.open("GET", "cgi-bin/shift_google.rb", true);
      req.send( null );

    }

    function getXHR() {
      var req;
      try {
        req = new XMLHttpRequest();
      } catch( e ) {
        try {
           req = new ActiveXObject("Msxm12.XMLHTTP");
        } catch( e ) {
           req = new ActiveXObject("Microsoft.XMLHTTP");
        }
      }

      return req;
    }

  </script>
  <body>
    <div id="result"></div>
    <form action="/cgi-bin/shift_google.rb" method="GET">
      <input type="submit" value="googleへ">
    </form>
  </body>
</html>

